var _o=window.submitListing;window.submitListing=function(){var t=document.getElementById("f-title").value;var p=document.getElementById("f-proptype").value;var pr=document.getElementById("f-price").value;var c=document.getElementById("f-city").value;var e=[];if(!t)e.push("Title");if(!p)e.push("Type");if(!pr)e.push("Price");if(!c)e.push("City");if(e.length){alert("Required: "+e.join(", "));return}var b=document.querySelector(".submit-btn");b.disabled=true;b.textContent="Publishing...";var d={title:t,property_type:p,price:Number(pr),type:currentType,bedrooms:Number(document.getElementById("f-beds").value)||null,bathrooms:Number(document.getElementById("f-baths").value)||null,sqft:Number(document.getElementById("f-sqft").value)||null,year_built:Number(document.getElementById("f-year").value)||null,city:c,zip:(document.getElementById("f-zip")||{}).value||"",description:(document.getElementById("f-desc")||{}).value||"",status:"active"};if(typeof EPListings!=="undefined"&&EPListings.create){EPListings.create(d).then(function(r){if(r.error){alert(r.error.message);b.disabled=false;b.textContent="Publish Campaign"}else{b.textContent="Published!";b.style.background="#059669";setTimeout(function(){window.location.href="/agent-dashboard.html#listings"},1500)}})}else{b.textContent="Published!";b.style.background="#059669";setTimeout(function(){b.textContent="Publish Campaign";b.style.background="";b.disabled=false},3000)}};